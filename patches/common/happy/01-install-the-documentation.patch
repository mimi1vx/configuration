Index: happy.spec
===================================================================
--- happy.spec	(revision 5)
+++ happy.spec	(working copy)
@@ -25,6 +25,9 @@
 URL:            https://hackage.haskell.org/package/%{name}
 Source0:        https://hackage.haskell.org/package/%{name}-%{version}/%{name}-%{version}.tar.gz
 Source1:        https://hackage.haskell.org/package/%{name}-%{version}/revision/1.cabal#/%{name}.cabal
+BuildRequires:  autoconf
+BuildRequires:  docbook-dtd
+BuildRequires:  docbook-xsl-stylesheets
 BuildRequires:  ghc-Cabal-devel
 BuildRequires:  ghc-array-devel
 BuildRequires:  ghc-array-prof
@@ -36,6 +39,8 @@
 BuildRequires:  ghc-mtl-prof
 BuildRequires:  ghc-rpm-macros
 ExcludeArch:    %{ix86}
+BuildRequires:  libxml2
+BuildRequires:  libxslt
 %if %{with tests}
 BuildRequires:  ghc-process-devel
 BuildRequires:  ghc-process-prof
@@ -53,9 +58,14 @@
 %build
 %define cabal_configure_options -f-bootstrap
 %ghc_bin_build
+cd doc
+autoreconf
+%configure
+%make_build html
 
 %install
 %ghc_bin_install
+install -D --mode=444 doc/%{name}.1 %{buildroot}%{_mandir}/man1/%{name}.1
 
 %check
 %cabal_test
@@ -65,6 +75,7 @@
 %doc ChangeLog.md README.md doc examples
 %{_bindir}/%{name}
 %dir %{_datadir}/%{name}-%{version}
+%{_mandir}/man1/*
 %{_datadir}/%{name}-%{version}/GLR_Base.hs
 %{_datadir}/%{name}-%{version}/GLR_Lib.hs
 %{_datadir}/%{name}-%{version}/HappyTemplate.hs
